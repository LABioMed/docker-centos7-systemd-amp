sudo: required

services:
  - docker

before_install:
  - make

script:
  - make run
  - make test

after_success:
  - make push_quay
  - make push_hub

notifications:
  email: false

env:
  global:
    - DOCKER_IMAGES=base app mariadb php-base php-fpm httpd drush
    - DOCKER_REGISTRY=quay.io
    - DOCKER_REPO_USERNAME=labiomed
    - DOCKER_REPO_SLUG=centos7-systemd-amp
    - secure: i0uAXOp0DqXCVGu03uRGrO4qcCUIVNvWz9+FcLuxfrRanus+Hol79SRiLKkfOEgIo4zPSEkgK9NUOZZLVXssPwcIr4gyj+jxjBbMrVUrQGSvc3jsrp2c/UTqXZ1y9ue4f8eh9wMSO/s0TDqKTPJGqZZ2+R2wQjbp0wMMtoS0PFsESoLI9UlJmUXtq9iaYTHOjHrBzDVroPQqGyEwVRn6B5yLigl8EpykjyFGsZ6kMXAOWbTwS/vxYHFmxPDfVKWDHfShQxeVmJIAT7X5dajAkmfQgR0fyvE8zbPQKzfdytATpJPg0sm4a+BRI1STxIi7VWHg/IZX/hrhDfjJjKhs6jRH8PzfLyF5IPBFAjHr92Bk9vTw2FCbFNpzwOlmpS/k0xfo5OyOJuccOW8RVH/KTaQ6R0ZsXgXPq8XmSM2QnZilddy9b9CYLbVFLEW04P0Tk0LDiMX9mnaH3NvX9WfXXLdx2VYb0+wK3YLcs7QKL9uPNVvSNwold5XemgAAnhhrsCYg1fCWzW6PkOY/usxajMqeDMho0UPZcUyq2454n/7nEhoYCpzjWuAo3uEdc9DgVz6VIIYELK45oMAKO7GgdUhKGXwT7kpUEiQu4gi7Zx/Serq8mlrSHthF9E+0DKA7T7uCNGoE3+oAYI8P+l+geP8HQ8pbxqJZyN7Q8jczF3Y=
    - secure: L6qrpW4Deu1ABpRsKhC1Sl+7PPSMMoRggcYadkO4FvKmhv2SGt0dXxrMj8YV3S6N34VrXmCjFl2nkjK9v7BYDx/8VBLFHm8PRPfx1tNIN1n3ah/0wl2hXq56f+7bGz3rDTl8m3ZYYeXyy9x5VUMJ/a5qAa2RUjTvKlTvW6RKTm9B5uPyDWa8Iep7vryg7kjzNqUAeSDTrPM9KGMTj+PsJg+WS+iymVZZ8aQCLPtkc6EXSVwqpJLSOhKIuh59tyfuz8CAXv5ZYK8JG+7k+0B3hxHoqUqy0VLBnMVTFIPBq/vMu8zHk/MDME1DW1OUdFhFmKVVzrRPVmic8D53Z89YWMJ4hXOM4l7abBEC0Q+xAVLgYRN/zyHOCTWnHenwZVhnbWwbkoSFbM0fvv/llo66jzELty0ent24hS06w0iUbD6c2iVsK4SdtFF6W+U2mcnYJpCsNYtFzdbbcJAjbXCC8aM6OAnk6fs2any6L2YXzgMv3MiSrIG2qXWvtJqUBk55sbCIyehlYjftN2q9ezyBfhBQP+wKZ9SUi9369V/al2fUCBeKTkp8HdJ+5uo6yl7Qulh+WG66q8pjvwIKaMA1lEgtCTUpAa9Lgi8nGRYHx/hOsVto2yGx+dS0xlxPxpTLCpnIwPaYbk77LpUll5HziuT1Zwub3gypCaJpuo8ADbA=
    - secure: U+d2zoobvUJMX1ZJaOJlXKb01jmAHjNS1QrH7SkYLSg9Pbbj3Kf9VZ716WE1Bn0fqEp7FtrAKUDavn/gwnsNExFemIYvQID2E97qlxO/Xx+tf0PFW1Pw8p4ZcdqTmKcrS7LNy5n+EFig1bWbrnAB7tJ3LEHP24CnDgs9jCIHvk1yjIzYICiaZGozVxLEiEA9jVpZ9gsMcgndhcpQfaB7zhB0raZNHhjFvNlkFZ3U3EJe0QNF6y2i8lKwyumDjP3Ys4+QA7P+krMXKGcIhPlDeXBvfVHEMflz3wYI6plA/b/gdxcJv1j2Ws3wXkbXCwZCNlZcO+AtEA//s5JVpUIZDm4Z12uosIJVlrGvAz0buWwjsyj+FMn0gk6jwMsY1/iZFBD3an0YBTWo4EW+Wl15A3vdrH4mSoBM8BNX8ahFEmYeutrvRpnou+G5cp625asZJnw4JjtgqUyaVe2gTNmm6tynkQ/9TJsN39LlRNaatxY3jVISsy5ky913UFPed0NtIWf/sxBmllvKknkUPil96M4lkCVmgAnu7XPfOuVLkUDPnPloetMxlAFxurN89ViPWUxbLTeSE+h1EBWvUgwTKiQf/q/zP8VfWHmZK6RcBgVX/b5tNvEamgHPPif8SrjIGLcXuD+ymnglFDaxvNvLne+daxjp1ZY5PaDb/szbhm8=
    - secure: Y5YZudLcAi1FaFxSHbAw5lPtXtnq0Zh2aN7rqZTh1TWMZ81g6mUz5vZsg5jVBcDTGFhezEh9FeoBPXgfszqmG6rkWM9VHXKQf/gBMqbJBwQRj8865pEVzcN1mDVWnoJEsJux3vRj3Du5+WsY4lPwbRIJNviv8ze+GYnuZmYRIznOxiXvjWzrl6/ArVBIAu8QCozm+BHmIHDw2DciQxwy+O/ruzGrizIqPhViIep7+HFrsI9O4Cpz3Ni0bSBzDU1PlkxKBF4WrNRsO9MYPIdlPyrLiuXUZ3+zn8SXkQuK+frSj4ovlw44PCre4xtzDaXYhAu4t7W5KjPrp+DffSaKnQ9A7tsQe4yybuIoClryFvISKbmEi3VEHQ4I7WgKECXiCUKjsAYM/I8ny2TRTEfE+6VP2rcuVd92XVou8m37Tjbr2do4U63eD8cLAlzAxtOKLnu5JjWYbEVaNkUKPLbSj0A6C2T7PUhbP+wzAQSfLucl2Egloym7jw+nxslKFWxh23CfUaILdBmAuiA7OAQ21pPx4MuxM5iD+8ugNtMuIHfVLDmiXfKQabzDOrh+ZCJMJwNP92KZRE5q/zPFOmf4rMTmQg++zBQ9pf+Kw4/Ksb3QVm/ke+Va1J5tHGCEt4HqLkYL0CUNoz4n9wI6WZm2FhM3i5QERE0WqCALTgi6aRA=
    - secure: DF45Yf+CEyXZL1ZiK8H/7SlIiN6j8AF5291u1+0f12eWYjSngb9cbPe7pNywkquWLKwGeKcRrSfryiIa417aOBldz8/sAepn/76W8RB1WjcOEgHmXrJlpCF4G4ziLidUBp5Hd9FX/CyEAi5OUmpxWAfWnOAERHC5pr89YzrpfY24MX/atv/uvh9raAkjn16FCcDfUYlkc0ELLIoh22Ey5rCH7WAG2bv5TKmPuyLvZd850Aqf+C224qAR60XLErOffcrNTUEA+USq2mfWF1RO2+tFEhxy0H5z9ep4PaDPy/rJ8aQj7btAll9F1ca3bgT6QwCBRrglK7zyaTXmneI78zR2ygPJdF8nQ6qHXKRzsIM0y7GShYvcd51qyUvevO9A+ynMJazqIiqTkAfc0zHeK+evBjdhzQJJoTn6OJH4w5pUgywAaRHHLbMMQersAKnzzULl02nuDTzXuKGEDTrhnDP/Ntv0gFM9v00UjkkedQKkkRmfZFWSoe8+1Jn9gPu4EdxlNrSbuj1D7467V8bntOZ8xh8Yaf5nTCdeTHvJH/92rr7l2Rv0EvGmCaGKGgMtb6/KpJuglDcK7rauqdRroPgHx8CLJYA/zz1k9n1Irz4YnK1dc3cwYwzLOMKLwwywTMgAQkIWRZ37dbslor5jySerQsKcUF9ZeoPoisXh9ek=
    - secure: oKXqucG8dz3/0oOgSAG9msJ15Ce5gslgPMHs2mocbxr8nIezs0JL/mOVSYI4A6MS2FzxH3lgYgkzr2r67DjKgw+D43XbBwhTQbMigwRVB03pykX3BE3NQh9YrHZsckMkaJzr90YhBTETi3v7nOnSkLyn4doCO9imHWRJj6Dv+r4gKbEVNXciFq9NU4OpzNH5kNvwer/0xDcTjF7esdUTeZ5Lx4RZJTOtI3nQKnGzqfP0bez7RU/MUcQH/6qlYxiqv2oxTSSSMcXrl9RqoX0GRktkEYHyepEJaMtBEsGyLqZaZdo6ukbC3HM/e8YYLepbpqzHQNZlUHGmIEo73ELgQVW56vD/co4hO4lKE6wVwhI7dstOYkEPlXezjRZkRGhtb2rZ8M/MS1BabV7fTqPmCQJj0DbHSOUICirqkBtyB/3ks9V7UMSTNa2+HCaL8DBxw9CKRpilp263hxjuqElkmQB4frHvIIW/44pCooFq8Kihc8ffzWrGBseG6K3fkl/P4s+RLCShcG8df/+jkXid6x2Llsp8QXciURVBfKE9LUuhh2AQM10mKvBH0gZnJldiwE7dJUgp9RmED3bg8NhtVlQfuqoPtRWg+HhuxzpZOGIZIAMjrThcaDzIEGnrJhijXdjy1at25afj4GS3kURTxcWxj5Xofn3xlAaLxKm7RU0=
